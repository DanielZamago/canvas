<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Canvas</title>
    <style type="text/css">
      canvas {
        background-color: pink;
      }
    </style>
  </head>
  <body>
    <canvas id="mycanvas" width="500" height="500"> </canvas>

    <script type="text/javascript">
      var cv = null;
      var ctx = null;
      var press = false;
      var super_x = 225, super_y = 225;

      function run(){
        cv = document.getElementById("mycanvas");
        ctx = cv.getContext("2d");
        paint();
      }

      function paint() {

        window.requestAnimationFrame(paint);

        ctx.fillStyle = randomColor();
        ctx.fillRect(0, 0, 500, 500);
        ctx.fillStyle = randomColor();
        ctx.fillRect(super_x, super_y, 50, 50);
        ctx.strokeRect(super_x, super_y, 50, 50);

        super_x+=10;
        if(super_x>=500){
            super_x=0;
        }
      }

      document.addEventListener("keydown", function (e) {
        console.log(e);

        //arriba
        if (e.keyCode == 87 || e.keyCode == 38) {
          super_y -= 5;
        }

        //abajo
        if (e.keyCode == 83 || e.keyCode == 40) {
          super_y += 5;
        }

        //derecha
        if (e.keyCode == 68 || e.keyCode == 39) {
          super_x += 5;
        }

        //izquierda
        if (e.keyCode == 65 || e.keyCode == 37) {
          super_x -= 5;
        }

        paint();
      });

      window.requestAnimationFrame = (function () {
        return (
          window.requestAnimationFrame ||
          window.webkitRequestAnimationFrame ||
          window.mozRequestAnimationFrame ||
          function (callback) {
            window.setTimeout(callback, 17);
          }
        );
      })();

      window.addEventListener('load',run ,false);

        function random(number){
            return Math.floor(Math.random()*number);
        }
        function randomColor(){
            return 'rgba('+random(255)+','+random(255)+','+random(255)+',0.3)';    
        }
    </script>
  </body>
</html>
